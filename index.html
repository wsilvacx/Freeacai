<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monte seu A√ßa√≠</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f7f7f7;
    }
    h2, h3 {
      color: #4B0082;
    }
    .size-card {
      display: inline-block;
      padding: 15px;
      margin: 5px;
      border: 2px solid #ccc;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      transition: 0.3s;
    }
    .size-card.active {
      border-color: #4B0082;
      background-color: #e6d6f7;
    }
    .check-list label {
      display: block;
      margin: 5px 0;
    }
    .summary {
      margin-top: 20px;
      padding: 15px;
      border: 2px solid #ccc;
      border-radius: 8px;
      background: #fff;
    }
    .line {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    .btn-order {
      margin-top: 10px;
      padding: 10px 20px;
      background: #4B0082;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .btn-order:hover {
      background: #6a0dad;
    }
    button {
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>Monte seu A√ßa√≠</h2>

  <h3>Tamanho</h3>
  <div class="size-card active" data-price="10" data-text="300 ml - R$ 10,00" onclick="selecionarTamanho(this)">300 ml - R$ 10,00</div>
  <div class="size-card" data-price="15" data-text="500 ml - R$ 15,00" onclick="selecionarTamanho(this)">500 ml - R$ 15,00</div>
  <div class="size-card" data-price="20" data-text="700 ml - R$ 20,00" onclick="selecionarTamanho(this)">700 ml - R$ 20,00</div>

  <h3>Fruta</h3>
  <label><input type="radio" name="fruta" value="Uva" checked> Uva</label>
  <label><input type="radio" name="fruta" value="Morango"> Morango</label>
  <label><input type="radio" name="fruta" value="Banana"> Banana</label>

  <h3>Adicionais</h3>
  <div class="check-list">
    <label><input type="checkbox" value="Leite em p√≥"> Leite em p√≥ (+R$2,00)</label>
    <label><input type="checkbox" value="Castanhas"> Castanhas (+R$3,00)</label>
    <label><input type="checkbox" value="Leite condensado"> Leite condensado (+R$2,50)</label>
    <label><input type="checkbox" value="Pa√ßoca"> Pa√ßoca (+R$2,00)</label>
    <label><input type="checkbox" value="Granola"> Granola (+R$1,50)</label>
    <label><input type="checkbox" value="Flocos de arroz"> Flocos de arroz (+R$1,50)</label>
    <label><input type="checkbox" value="M&M colorido"> M&M colorido (+R$2,50)</label>
  </div>

  <h3>Resumo do Pedido</h3>
  <div class="summary">
    <div class="line"><span>Tamanho:</span> <span id="res-tamanho"></span></div>
    <div class="line"><span>Fruta:</span> <span id="res-fruta"></span></div>
    <div class="line"><span>Adicionais:</span> <span id="res-adicionais"></span></div>
    <div class="line"><span>Pre√ßo:</span> <span id="res-preco"></span></div>
    <button id="btnOrder" class="btn-order">Adicionar ao carrinho</button>
  </div>

  <script>
    let carrinho = [];
    let precoAtual = 10;
    let textoTamanho = "300 ml - R$ 10,00";

    const adicionaisPreco = {
      "Leite em p√≥": 2,
      "Castanhas": 3,
      "Leite condensado": 2.5,
      "Pa√ßoca": 2,
      "Granola": 1.5,
      "Flocos de arroz": 1.5,
      "M&M colorido": 2.5
    };

    function selecionarTamanho(card){
      document.querySelectorAll('.size-card').forEach(c => c.classList.remove('active'));
      card.classList.add('active');

      precoAtual = parseFloat(card.getAttribute('data-price'));
      textoTamanho = card.getAttribute('data-text');

      document.getElementById('res-tamanho').innerText = textoTamanho;
      atualizarResumo();
    }

    function atualizarResumo(){
      const fruta = document.querySelector('input[name="fruta"]:checked').value;
      document.getElementById('res-fruta').innerText = fruta;

      const adicionais = Array.from(document.querySelectorAll('.check-list input[type="checkbox"]:checked'))
        .map(i => i.value);
      document.getElementById('res-adicionais').innerText = adicionais.length ? adicionais.join(', ') : 'Nenhum';

      let totalAcai = precoAtual;
      adicionais.forEach(a => totalAcai += adicionaisPreco[a] || 0);
      document.getElementById('res-preco').innerText = 'R$ ' + totalAcai.toFixed(2);
    }

    document.addEventListener('DOMContentLoaded', function(){
      const first = document.querySelector('.size-card.active');
      if(first){
        precoAtual = parseFloat(first.dataset.price || 10);
        textoTamanho = first.dataset.text || '300 ml - R$ 10,00';
      }
      atualizarResumo();
    });

    function adicionarAoCarrinho(){
      const fruta = document.querySelector('input[name="fruta"]:checked').value;
      const adicionais = Array.from(document.querySelectorAll('.check-list input[type="checkbox"]:checked'))
        .map(i => i.value);

      let totalAcai = precoAtual;
      adicionais.forEach(a => totalAcai += adicionaisPreco[a] || 0);

      const acai = {
        tamanho: textoTamanho,
        fruta: fruta,
        adicionais: adicionais,
        preco: totalAcai
      };

      carrinho.push(acai);

      const montarOutro = confirm("A√ßa√≠ adicionado ao carrinho! Deseja montar outro a√ßa√≠?");
      if(montarOutro){
        resetarFormulario();
      } else {
        mostrarCarrinho();
      }
    }

    function resetarFormulario(){
      document.querySelectorAll('.size-card').forEach(c => c.classList.remove('active'));
      const primeiro = document.querySelector('.size-card');
      primeiro.classList.add('active');
      precoAtual = parseFloat(primeiro.dataset.price || 10);
      textoTamanho = primeiro.dataset.text || '300 ml - R$ 10,00';

      document.querySelector('input[name="fruta"][value="Uva"]').checked = true;
      document.querySelectorAll('.check-list input[type="checkbox"]').forEach(c => c.checked = false);

      atualizarResumo();
    }

    function mostrarCarrinho(){
      let html = "<h3>Carrinho</h3>";
      let total = 0;

      carrinho.forEach((acai, i) => {
        total += acai.preco;
        html += `<div class="line">
          <span>${acai.tamanho} - ${acai.fruta}${acai.adicionais.length ? ' (' + acai.adicionais.join(', ') + ')' : ''}</span>
          <span>R$ ${acai.preco.toFixed(2)} 
          <button onclick="removerAcai(${i})" style="background:red;color:#fff;border:none;border-radius:6px;padding:2px 6px;cursor:pointer;">X</button>
          </span>
        </div>`;
      });

      html += `<div class="line" style="margin-top:14px;"><strong>Total:</strong> <span>R$ ${total.toFixed(2)}</span></div>`;
      html += `<button class="btn-order" onclick="finalizarCarrinho()">Finalizar pedido pelo WhatsApp</button>`;

      const summary = document.querySelector('.summary');
      summary.innerHTML = html;
    }

    function removerAcai(index){
      carrinho.splice(index, 1);
      mostrarCarrinho();
    }

    function finalizarCarrinho(){
      if(carrinho.length === 0){
        alert("Carrinho vazio!");
        return;
      }

      let mensagem = "üçß *Novo Pedido de A√ßa√≠* üçß\n";
      let total = 0;
      carrinho.forEach((acai, i) => {
        mensagem += `\n*Item ${i+1}:*\nTamanho: ${acai.tamanho}\nFruta: ${acai.fruta}\nAdicionais: ${acai.adicionais.length ? acai.adicionais.join(', ') : 'Nenhum'}\nPre√ßo: R$ ${acai.preco.toFixed(2)}\n`;
        total += acai.preco;
      });
      mensagem += `\n*Total do pedido:* R$ ${total.toFixed(2)}`;

      const numero = "5599984557326";
      const url = "https://wa.me/" + numero + "?text=" + encodeURIComponent(mensagem);
      window.open(url, "_blank");
    }

    document.getElementById('btnOrder').onclick = adicionarAoCarrinho;
  </script>

</body>
</html>